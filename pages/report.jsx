import { useEffect, useState } from 'react';
import Head from 'next/head';
import { Button } from 'antd';
import { Loading3QuartersOutlined } from '@ant-design/icons';
import sheet from '../services/sheet';
import 'animate.css';
import GenerateFilters from '../components/GenerateFilters';

function Home() {
  const [records, setRecords] = useState([]);
  const [types, setTypes] = useState([]);
  const [recordsLoading, setRecordsLoading] = useState(true);
  const [typesLoading, setTypesLoading] = useState(true);

  const loadRecords = async () => {
    setRecordsLoading(true);
    const r = await sheet.loadRecords();
    setRecords(r);
    setRecordsLoading(false);
  };
  const loadTypes = async () => {
    setTypesLoading(true);
    const t = await sheet.loadTypes();
    setTypes(t);
    setTypesLoading(false);
  };

  useEffect(() => {
    loadRecords();
    loadTypes();
  }, []);
  if (recordsLoading || typesLoading) {
    return (
      <div className={`loader-container animate__animated  ${!(recordsLoading || typesLoading) ? 'animate__fadeOut' : 'animate__fadeIn'}`}>
        <Loading3QuartersOutlined style={{ fontSize: 20 }} spin />
      </div>
    );
  }
  return (
    <div>
      <Head>
        <title>Women.krd</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>
      <GenerateFilters types={types} />
      <p>{JSON.stringify(records)}</p>
      <hr />
      <p>{JSON.stringify(types)}</p>
    </div>
  );
}

export default Home;
